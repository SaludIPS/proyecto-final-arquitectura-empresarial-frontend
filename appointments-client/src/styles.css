/* ================== RESET & THEME ================== */
* { box-sizing: border-box; }
html, body, #root { height: 100%; }

:root{
  /* Tokens: spacing, type, palette y sombras */
  --space-1:4px; --space-2:8px; --space-3:12px; --space-4:16px; --space-5:20px; --space-6:24px;
  --radius-sm:8px; --radius-md:12px; --radius-lg:16px;
  --dur-1:120ms; --dur-2:180ms; --ease-1:cubic-bezier(.16,1,.3,1);

  /* Tema claro */
  --bg:#f3f4f6;
  --bg-accent:#eef2ff;
  --panel:#ffffff;
  --panel-2:#f9fafb;
  --panel-alt:#f8fafc;
  --text:#0f172a;
  --text-muted:#6b7280;
  --primary:#2563eb;
  --primary-600:#1d4ed8;
  --danger:#dc2626;
  --success:#16a34a;
  --border:#e5e7eb;
  --shadow:0 10px 24px rgba(15,23,42,.08);
}

body{
  margin:0;
  font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color:var(--text);
  background:radial-gradient(circle at top, var(--bg-accent) 0, var(--bg) 40%, #eef2ff 100%);
}

/* ================== LAYOUT ================== */
.container{
  min-height:100%;
  display:flex;
  flex-direction:column;
}

header{
  position:sticky;
  top:0;
  z-index:10;
  background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.9));
  backdrop-filter:saturate(130%) blur(6px);
  border-bottom:1px solid var(--border);
  padding:var(--space-4) var(--space-4);
  display:flex; align-items:center; justify-content:space-between; gap:var(--space-4);
}

header h1{
  margin:0;
  font-size:18px; letter-spacing:.2px; font-weight:700; color:var(--text);
}

/* zona config APIs */
.api-config{
  display:flex;
  gap:10px;
  align-items:center; flex-wrap:wrap;
}
.api-config label{
  color:var(--muted);
  font-size:13px;
}
.api-config input{
  padding:8px 10px; border:1px solid var(--border); background:var(--panel-2); color:var(--text);
  border-radius:10px; min-width:220px; outline:none; font-size:13px; transition:box-shadow var(--dur-2) var(--ease-1), border-color var(--dur-2) var(--ease-1);
}
.api-config input:focus-visible{
  border-color:var(--primary-600); box-shadow:0 0 0 4px rgba(37,99,235,.12);
}

/* versión apilada */
.api-config.stack{
  align-items:flex-end;
}
.api-config.stack .row{
  display:flex;
  gap:.6rem;
  align-items:center;
  margin-bottom:.35rem;
}
.api-config.stack label{
  min-width:120px;
  opacity:.9;
  font-weight:500;
}

/* layout principal */
main{
  flex:1;
  width:100%;
  max-width:1120px; margin:24px auto 32px; padding:0 16px; display:grid; gap:22px;
}

/* en pantallas grandes, dos columnas si hay espacio */
@media (min-width: 1040px){
  /* Forzar una sola columna en pantallas grandes para que el listado quede
     debajo del formulario (Programar cita) en lugar de lado a lado. */
  main{
    grid-template-columns: 1fr;
    align-items:flex-start;
  }
}

/* tarjetas */
.card{
  background:linear-gradient(180deg, var(--panel), var(--panel-2)); border:1px solid var(--border);
  border-radius:var(--radius-lg); padding:var(--space-4); box-shadow:var(--shadow);
}

.card h2{
  margin:0 0 var(--space-3); font-size:16px; font-weight:600; color:var(--text);
}

/* ================== FORMS ================== */
.grid-form .form-row{
  display:grid; gap:8px; margin-bottom:12px;
}

/* en desktop, label a la izquierda y campo a la derecha */
@media (min-width: 720px){
  .grid-form .form-row{
    grid-template-columns: 120px minmax(0,1fr);
    align-items:center;
  }
  .grid-form .form-row > label{
    font-size:14px;
    color:var(--muted);
  }
}

.grid-form input{
  padding:8px 10px; border:1px solid var(--border); background:var(--panel-2); color:var(--text);
  border-radius:8px; font-size:14px;
}
.grid-form input:focus-visible{
  border-color:var(--primary-600); box-shadow:0 0 0 4px rgba(37,99,235,.12);
}

.field-with-error{
  display:grid;
  gap:6px;
}
.field-error{
  color:#b91c1c;
  font-size:12px;
}
.field-with-error input[aria-invalid="true"],
.grid-form input[aria-invalid="true"],
.row-edit-input[aria-invalid="true"]{
  border-color:#f97373;
  box-shadow:0 0 0 3px rgba(248,113,113,.18);
}

/* Unificar estilo de TODOS los selects (tema claro) */
select{
  appearance:none;
  -webkit-appearance:none;
  -moz-appearance:none;
  background:var(--panel-2); color:var(--text); border:1px solid var(--border); border-radius:.6rem;
  padding:.5rem .9rem; width:100%; line-height:1.25; font-size:14px;
}
select:focus{
  outline:none;
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(37,99,235,.18);
}
select:disabled{
  opacity:.6;
  cursor:not-allowed;
}
select option{
  background:#ffffff;
  color:#111827;
}

/* Wrapper con caret para los selects */
.pretty-select{
  position:relative;
  width:100%;
}
.pretty-select select{
  padding-right:2.2rem;
}
.pretty-select::after{
  content:"▾";
  position:absolute;
  right:.65rem;
  top:50%;
  transform:translateY(-50%);
  pointer-events:none;
  opacity:.65;
  color:#9ca3af;
  font-size:12px;
}
.pretty-select.compact select{
  padding-right:1.8rem;
}

/* Inputs globales */
input[type="text"],
input[type="datetime-local"],
input[type="email"],
input[type="number"],
textarea{
  background:#f9fafb;
  color:#111827;
  border:1px solid var(--border);
  border-radius:.6rem;
  padding:.55rem .9rem;
  font-size:14px;
}
::placeholder{
  color:#9ca3af;
  opacity:.9;
}

/* ================== BUTTONS ================== */
button{
  padding:9px 14px; border:1px solid var(--primary); color:#fff; background:linear-gradient(180deg, var(--primary), var(--primary-600));
  border-radius:999px; cursor:pointer; transition:transform var(--dur-2) var(--ease-1), box-shadow var(--dur-2) var(--ease-1), filter var(--dur-2) var(--ease-1);
  font-size:14px; font-weight:600; box-shadow:0 10px 20px rgba(37,99,235,.14); display:inline-flex; align-items:center; gap:8px;
}
button:hover{
  filter:brightness(1.04);
  transform:translateY(-1px);
}
button:active{
  transform:translateY(0);
  box-shadow:0 4px 10px rgba(37,99,235,.18);
}
button:focus-visible{
  outline:none;
  box-shadow:0 0 0 3px rgba(37,99,235,.35);
}
button.secondary{
  background:#f9fafb;
  color:#111827;
  border-color:var(--border);
  box-shadow:none;
}
button.secondary:hover{
  border-color:var(--primary);
  color:var(--primary);
}
button.danger{
  background:linear-gradient(180deg, var(--danger), #b91c1c);
  border-color:#b91c1c;
  box-shadow:0 8px 18px rgba(185,28,28,.25);
}
button:disabled{
  opacity:.65;
  cursor:not-allowed;
  filter:none;
  transform:none;
  box-shadow:none;
}

/* ================== LIST HEADER & TOOLS ================== */
.list-header{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
}
.list-header .right{
  display:flex;
  align-items:center;
  gap:10px;
  color:var(--muted);
  font-size:13px;
}

.list-status{
  margin:8px 0 12px;
  color:var(--muted);
  font-size:13px;
}
.list-status.error{
  color:#b91c1c;
}

.list-tools{
  margin:10px 0 14px;
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}
.search-input{
  flex:1; min-width:160px; padding:8px 10px; border:1px solid var(--border); background:var(--panel-2); color:var(--text);
  border-radius:999px; outline:none; font-size:13px; transition:box-shadow var(--dur-2) var(--ease-1), border-color var(--dur-2) var(--ease-1);
}
.search-input:focus-visible{
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(37,99,235,.18);
}

/* ================== TABLE ================== */
.table-container {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  margin: 12px 0; border-radius: var(--radius-sm); box-shadow: 0 1px 3px rgba(2,6,23,.04);
}

table.table {
  width: 100%;
  min-width: 800px; /* Ancho mínimo para mantener la legibilidad */
  border-collapse: collapse; font-size:14px; background:var(--panel); border-radius:var(--radius-sm); overflow:hidden;
}

.table th, .table td {
  padding: 10px 12px;
  vertical-align: middle;
  text-align: left;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 240px;
}

.table th {
  font-weight: 600;
  color: var(--text);
  background-color: var(--panel-2);
  border-bottom: 2px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 1;
}

.table tbody tr {
  transition: background-color var(--dur-1) var(--ease-hover);
}

.table tbody tr:hover {
  background-color: rgba(2,6,23,0.02);
}

.table tbody tr:nth-child(even) {
  background-color: var(--panel-2);
}

.table tbody tr:nth-child(even):hover {
  background-color: rgba(0, 0, 0, 0.03);
}

/* Celdas con ancho mínimo */
.w-min {
  width: 1%;
  white-space: nowrap;
}

/* Estado vacío */
.empty-state {
  text-align:center; padding:var(--space-6) var(--space-4); color:var(--text-muted); font-style:italic;
}

/* ================== BADGES ================== */
.badge{
  padding:.18rem .6rem;
  border-radius:999px;
  font-size:.8rem;
  display:inline-block;
  font-weight:500;
}

/* tonos suaves para los estados */
.badge.programada{
  background:rgba(37,99,235,.08);
  color:#1d4ed8;
}
.badge.reprogramada{
  background:rgba(234,179,8,.12);
  color:#b45309;
}
.badge.cancelada{
  background:rgba(239,68,68,.1);
  color:#b91c1c;
}
.badge.hecha{
  background:rgba(34,197,94,.1);
  color:#15803d;
}

/* ================== TOASTS & FOOTER ================== */
.toast-container{
  position:fixed;
  right:18px;
  bottom:18px;
  display:grid;
  gap:10px;
  z-index:9999;
}
.toast{
  padding:12px 14px;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--panel); color:var(--text); box-shadow:var(--shadow);
  font-size:13px;
}
.toast.success{
  border-color:rgba(16,185,129,.6);
}
.toast.error{
  border-color:rgba(239,68,68,.6);
}

footer{
  text-align:center;
  padding:14px 16px 18px;
  color:var(--muted);
  font-size:12px;
}
footer small{
  opacity:.9;
}

/* ============ RESPONSIVE EXTRA ============ */

/* Tablets y abajo */
@media (max-width: 768px){
  header{
    flex-direction:column;
    align-items:flex-start;
    padding:12px 16px;
  }

  header h1{
    font-size:20px;
  }

  .api-config{
    width:100%;
  }
  .api-config.stack .row{
    flex-direction:column;
    align-items:flex-start;
  }
  .api-config.stack label{
    min-width:auto;
  }
  .api-config input{
    width:100%;
    min-width:0;
  }
  .api-config > button{
    width:100%;
    justify-content:center;
  }

  main{
    margin:16px auto 24px;
    padding:0 12px;
    grid-template-columns:minmax(0,1fr);
  }

  .card{
    padding:14px 14px 16px;
  }

  .list-header{
    flex-direction:column;
    align-items:flex-start;
    gap:6px;
  }
  .list-header .right{
    width:100%;
    justify-content:space-between;
  }

  .list-tools{
    flex-direction:column;
    align-items:stretch;
  }
  .search-input{
    border-radius:10px;
  }

  /* tabla con scroll horizontal en móvil */
  .table-container {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  table.table{
    display:block;
    width:100%;
    overflow-x:auto;
    -webkit-overflow-scrolling:touch;
  }
  .table thead,
  .table tbody,
  .table tr{
    width:100%;
  }
  .table th,
  .table td{
    white-space:nowrap;
  }

  .row-actions{
    justify-content:flex-start;
  }
}

/* Móviles muy pequeños */
@media (max-width: 480px){
  header{
    padding:10px 10px;
  }

  header h1{
    font-size:18px;
  }

  .card h2{
    font-size:16px;
  }

  button{
    width:100%;
    justify-content:center;
  }

  .row-actions button{
    flex:1 1 auto;
  }

  .grid-form .form-row{
    grid-template-columns:1fr;
  }

  footer{
    font-size:11px;
    padding-bottom:14px;
  }
}
